<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sinau.dao.AdminDao">
	<select id="getMemStateNm" resultType="com.sinau.dto.AdminDto">
		select rownum AS m_nmnum, m_email, m_name, m_pwd, m_phone,
m_birth, m_license, m_group, m_state from member 
where m_state=#{state} and m_group='nm'
	</select>
	<select id="getMemStateDm" resultType="com.sinau.dto.AdminDto">
		select rownum AS m_dmnum, m_email, m_name, m_pwd, m_phone,
m_birth, m_license, m_group, m_state from member 
where m_state=#{state} and m_group='dm'
	</select>
	<select id="getMemStateCm" resultType="com.sinau.dto.AdminDto">
		select rownum AS m_cmnum, m_email, m_name, m_pwd, m_phone,
m_birth, m_license, m_group, m_state from member 
where m_state=#{state} and m_group='cm'
	</select>
	
	<!-- 전체멤버 -->
	<select id="getAllMem" resultType="com.sinau.dto.AdminDto">
	select * from member;
	</select>
	
	<!-- 메일체크 -->
	 <select id="memberCheck" parameterType="String" resultType="String">
      SELECT M_EMAIL
      FROM MEMBER
      WHERE M_EMAIL = #{m_email}
      </select>
	<!-- 회원 삭제 -->
	<delete id="getMemDel" parameterType="String" >
		DELETE FROM member WHERE
		M_EMAIL=#{email}
	</delete>
	<!-- 강의 삭제 -->
	<delete id="getLecDel" parameterType="String">
		DELETE FROM ONLINECLASS 
		WHERE ONC_CODE = #{code} 
	</delete>
	<delete id="getOfDel" parameterType="String">
		DELETE FROM OFFCLASS 
		WHERE OFC_CODE = #{code} 
	</delete>
	<delete id="getYDel" parameterType="String">
		DELETE FROM YOUTUBE_CLASS
		WHERE Y_CODE = #{code} 
	</delete>
	<!-- 판매글 삭제 -->
	<delete id="getSaleDel" parameterType="String">
		DELETE FROM PRODUCT
		WHERE P_CODE = #{code}
	</delete>
	<!-- 리뷰 글 삭제 -->
	<delete id="getReDel" parameterType="String">
		DELETE FROM productreview
		WHERE PRV_CODE = #{code}
	</delete>
		<insert id="youtubeWrite"
		parameterType="com.sinau.dto.YoutubeClassDto"
		useGeneratedKeys="true"
		keyProperty="y_code">
		<selectKey keyProperty="y_code"
			resultType="String" order="BEFORE">
				SELECT 'Y_'||SEQ_Y.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO youtube_class
		VALUES(#{y_code},#{y_title},#{y_subtitle},#{y_content},#{y_profile},#{y_url}, 
		#{y_userurl}, sysdate ,#{y_cts_code}, default, #{y_videosoure})
	</insert>
	<insert id="fileInsert" parameterType="HashMap">
		INSERT INTO files
		VALUES(#{y_code},
			#{oriFileName}, #{sysFileName}, #{y_cts_code})
	</insert>

</mapper>